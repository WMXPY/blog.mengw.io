---
layout: post
title:  "Play with JS - isArray()"
categories: JavaScript
description: 调戏JS, 判断一个数组是不是数组
---

## 概览

判断JS中一个变量是不是数组有很多方式，我在写TS的时候最常用的是`a instanceof Array`，虽然之前看过很多文章说这个非常靠谱因为他是不断递归对应变量的原型树，如果发现`Array`的话就返回`true`这个方式在 nodeJS 中确实是比较靠谱的但是在网页里还是有办法使其返回错误的结果。

我打算总结一下都有什么办法可以尝试判断一个变量是不是数组，而这些方法都有什么方式可以使其返回错误的结果。

### 流水的脚本，铁打的C++

在不考虑浏览器环境的情况下，最靠谱的方式是`.node`文件中调用V8原生的`Value->IsArray()`函数，这个函数返回一个原生C++`boolean`，从根本上判定其在栈上是以什么形式存在的，node 和浏览器亲切的帮我们封装了这个函数也就是`Array.isArray(<arr>)`这个方式可以说是最稳妥的。node 环境下不必说这个方法的通用性了，基本上无论是稳定性还是速度都是最快的，但是在古老的浏览器上，比如说不支持`es5`的浏览器可能这个函数就没法用了。

